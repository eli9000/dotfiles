#!/usr/bin/env ruby

require 'chronic'

def pomodoros(start_string, end_string)
  start_time = Chronic.parse start_string
  end_time = Chronic.parse end_string

  # Create 30m blocks for the given time range, e.g.
  # 10:00 - 10:30
  # 10:30 - 11:00
  # 11:00 - 11:30
  # and so on
  # Used for me to track pomodoros in the Things app.
  [].tap do |results|
    until start_time >= end_time
      results << [
        start_time.strftime('%-I:%M'),
        (start_time + 30*60).strftime('%-I:%M')
      ].join(' - ')

      start_time += 30 * 60
    end
  end
end

puts pomodoros ARGV[0], ARGV[1]
